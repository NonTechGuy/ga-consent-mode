<!DOCTYPE html>
<html>
  <head>
    <!-- Google tag (gtag.js) -->
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
    </script>
    <!-- End Google tag (gtag.js) -->

    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-XXXX');
    </script>
    <!-- End Google Tag Manager -->

    <!-- Consent Mode -->
    <script>
    window.onload=function(){
      if(localStorage.getItem('consentMode') === null) {
        document.getElementById('cookie-consent-banner').style.display = 'block';
        document.getElementById('btn-accept-all').addEventListener('click', function() {
          setConsent({
            necessary: true,
            analytics: true,
            preferences: true,
            marketing: true
          });
          hideBanner();
        });
        document.getElementById('btn-accept-some').addEventListener('click', function() {
          setConsent({
            necessary: true,
            analytics: document.getElementById('consent-analytics').checked,
            preferences: document.getElementById('consent-preferences').checked,
            marketing: document.getElementById('consent-marketing').checked
          });
          hideBanner();
        });
        document.getElementById('btn-reject-all').addEventListener('click', function() {
          setConsent({
            necessary: false,
            analytics: false,
            preferences: false,
            marketing: false
          });
          hideBanner();
        });
      }else{
        hideBanner()
        gtag('consent', 'default', JSON.parse(localStorage.getItem('consentMode')));
      }
    }
    function setConsent(consent) {
      const consentMode = {
        'functionality_storage': consent.necessary ? 'granted' : 'denied',
        'security_storage': consent.necessary ? 'granted' : 'denied',
        'ad_storage': consent.marketing ? 'granted' : 'denied',
        'analytics_storage': consent.analytics ? 'granted' : 'denied',
        'personalization': consent.preferences ? 'granted' : 'denied',
      };

      gtag('consent', 'update', consent);  
      localStorage.setItem('consentMode', JSON.stringify(consentMode));
    }
    function hideBanner() {
      document.getElementById('cookie-consent-banner').style.display = 'none';
    }
    </script>
    <!-- End Consent Mode -->
  </head>

  <body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-XXXX"
height="0" width="0" style="display:none;visibility:hidden"></iframe>
    </noscript>
  <!-- End Google Tag Manager (noscript) -->

    <section id="cookie-consent-banner" class="cookie-consent-banner" style="display: none;">
      <h3>Cookie settings</h3>
      <p>We use cookies to provide you with the best possible experience. They also allow us to analyze user behavior in order to constantly improve the website for you.</p>
      <button id="btn-accept-all">Accept All</button>
      <button id="btn-accept-some">Accept Selection</button>
      <button id="btn-reject-all">Reject All</button>
      <div class="cookie-consent-options">
        <label><input id="consent-necessary" type="checkbox" value="Necessary" checked disabled>Necessary</label>
        <label><input id="consent-analytics" type="checkbox" value="Analytics" checked>Analytics</label>
        <label><input id="consent-preferences" type="checkbox" value="Preferences" checked>Preferences</label>
        <label><input id="consent-marketing" type="checkbox" value="Marketing">Marketing</label>
      </div>
    </section>
  </body>
</html>